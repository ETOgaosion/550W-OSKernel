<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="zh">
  <compounddef id="virtio_8h" kind="file" language="C++">
    <compoundname>virtio.h</compoundname>
    <includes refid="pgtable_8h" local="no">asm/pgtable.h</includes>
    <includes refid="types_8h" local="no">common/types.h</includes>
    <includes refid="lock_8h" local="no">os/lock.h</includes>
    <includedby refid="plic_8c" local="no">src/drivers/plic/plic.c</includedby>
    <includedby refid="virtio__blk_8c" local="no">src/drivers/virtio/virtio_blk.c</includedby>
    <includedby refid="fs_8c" local="no">src/fs/fs.c</includedby>
    <includedby refid="include_2os_2syscall_8h" local="no">src/include/os/syscall.h</includedby>
    <includedby refid="main_8c" local="no">src/init/main.c</includedby>
    <includedby refid="irq_8c" local="no">src/kernel/irq/irq.c</includedby>
    <incdepgraph>
      <node id="2">
        <label>asm/pgtable.h</label>
        <link refid="pgtable_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>common/errno.h</label>
        <link refid="errno_8h"/>
      </node>
      <node id="1">
        <label>src/drivers/virtio/virtio.h</label>
        <link refid="virtio_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>asm/sbidef.h</label>
        <link refid="sbidef_8h"/>
      </node>
      <node id="5">
        <label>common/types.h</label>
        <link refid="types_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>asm/sbi.h</label>
        <link refid="sbi_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>os/lock.h</label>
        <link refid="lock_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>lib/list.h</label>
        <link refid="list_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <invincdepgraph>
      <node id="4">
        <label>src/fs/fs.c</label>
        <link refid="fs_8c"/>
      </node>
      <node id="2">
        <label>src/drivers/plic/plic.c</label>
        <link refid="plic_8c"/>
      </node>
      <node id="5">
        <label>src/include/os/syscall.h</label>
        <link refid="include_2os_2syscall_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>src/drivers/virtio/virtio.h</label>
        <link refid="virtio_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>src/init/main.c</label>
        <link refid="main_8c"/>
      </node>
      <node id="6">
        <label>src/kernel/irq/irq.c</label>
        <link refid="irq_8c"/>
      </node>
      <node id="3">
        <label>src/drivers/virtio/virtio_blk.c</label>
        <link refid="virtio__blk_8c"/>
      </node>
    </invincdepgraph>
    <innerclass refid="structbuf" prot="public">buf</innerclass>
    <innerclass refid="structvring__desc__t" prot="public">vring_desc_t</innerclass>
    <innerclass refid="structvring__used__elem" prot="public">vring_used_elem</innerclass>
    <innerclass refid="structvring__used__area" prot="public">vring_used_area</innerclass>
    <innerclass refid="structdisk" prot="public">disk</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="virtio_8h_1aac8de2a0393367154119c25e2b279953" prot="public" static="no">
        <name>VIRTIO0</name>
        <initializer>0x10001000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="7" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="7" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a25f490f8544627e94679dd4eee307c8a" prot="public" static="no">
        <name>VIRTIO0_IRQ</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="8" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="8" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a1ff87be27fd6ca3d1bd9190864fdf3a5" prot="public" static="no">
        <name>VIRTIO_MAGIC</name>
        <initializer>0x74726976</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="10" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="10" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a854926a03de057048cd2bb6711b3cac0" prot="public" static="no">
        <name>VIRTIO_VERSION</name>
        <initializer>0x1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="11" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="11" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a64ec44b55710ce97891b959bc30dc263" prot="public" static="no">
        <name>VIRTIO_DEVICE_ID_INV</name>
        <initializer>0x0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="12" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="12" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a42e74c95bee426e6ac63b472b3c4d615" prot="public" static="no">
        <name>VIRTIO_DEVICE_ID_NET</name>
        <initializer>0x1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="13" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="13" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a522b8a7ec068da7590967e4bb211cba6" prot="public" static="no">
        <name>VIRTIO_DEVICE_ID_BLK</name>
        <initializer>0x2</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="14" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="14" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a4ec945bee3dc37c6fd22962eaed5ef68" prot="public" static="no">
        <name>VIRTIO_VENDOR_ID_QEMU</name>
        <initializer>0x554d4551</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="15" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="15" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1adbc4f6c0d30c76a45fdc2dabe4cd2cbb" prot="public" static="no">
        <name>VIRTIO_MMIO_MAGIC_VALUE</name>
        <initializer>0x000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="17" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="17" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ab3b8d6bd5655e57baf01447384883076" prot="public" static="no">
        <name>VIRTIO_MMIO_VERSION</name>
        <initializer>0x004</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="18" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="18" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a843ffa98e22c96b9f33a0f4eb37a00cb" prot="public" static="no">
        <name>VIRTIO_MMIO_DEVICE_ID</name>
        <initializer>0x008</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="19" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="19" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ae24a27c9de546c99f70992f060e4ce99" prot="public" static="no">
        <name>VIRTIO_MMIO_VENDOR_ID</name>
        <initializer>0x00c</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="20" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="20" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a5dd01aeb9c7de8d00b86814e1df075c1" prot="public" static="no">
        <name>VIRTIO_MMIO_DEVICE_FEATURES</name>
        <initializer>0x010</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="21" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="21" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a9cf63c483bba3f905802d27bdef1c405" prot="public" static="no">
        <name>VIRTIO_MMIO_DRIVER_FEATURES</name>
        <initializer>0x020</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="22" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="22" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ac38064f45b6ee9dde59197cd6aeaf5ef" prot="public" static="no">
        <name>VIRTIO_MMIO_GUEST_PAGE_SIZE</name>
        <initializer>0x028</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="23" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="23" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1af06acc888e4338d9d286199d9f005380" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_SEL</name>
        <initializer>0x030</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="24" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="24" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a017f59f133403156d7443bf5a28a3ceb" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_NUM_MAX</name>
        <initializer>0x034</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="25" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="25" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ac04653c6ac4c886e5f08f0b292f66d1c" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_NUM</name>
        <initializer>0x038</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="26" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="26" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ad4da01927cf7b7e634817688bd6863a5" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_PFN</name>
        <initializer>0x040</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="27" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="27" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a465c47ba6a9f60ba8ab41eeae4499463" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_READY</name>
        <initializer>0x044</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="28" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="28" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1af33b9135a8725e32c95e412b97ecdce5" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_NOTIFY</name>
        <initializer>0x050</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="29" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="29" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ae8d1f2f787d1164fe9cc24b28bbc5c3c" prot="public" static="no">
        <name>VIRTIO_MMIO_INTERRUPT_STATUS</name>
        <initializer>0x060</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="30" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="30" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a2bec6b89c384b4860985d98340a540d5" prot="public" static="no">
        <name>VIRTIO_MMIO_INTERRUPT_ACK</name>
        <initializer>0x064</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="31" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="31" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a93ae0e8556428cc98d2f964eb82d3aec" prot="public" static="no">
        <name>VIRTIO_MMIO_STATUS</name>
        <initializer>0x070</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="32" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="32" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a47a92b06df621b14b67c3c45a7d3f97a" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_DESC_LOW</name>
        <initializer>0x080</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="33" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="33" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1aa4404e6255943932d3460111008ae11d" prot="public" static="no">
        <name>VIRTIO_MMIO_QUEUE_DESC_HIGH</name>
        <initializer>0x084</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="34" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="34" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a9e2cbfbe798bc5d5f83a5d18bf3e79dc" prot="public" static="no">
        <name>VIRTIO_MMIO_DRIVER_DESC_LOW</name>
        <initializer>0x090</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="35" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="35" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1aed499579cb6aa8847ef46495bac65a87" prot="public" static="no">
        <name>VIRTIO_MMIO_DRIVER_DESC_HIGH</name>
        <initializer>0x094</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="36" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="36" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a78d0ab0e08fb760a532cc01e08753665" prot="public" static="no">
        <name>VIRTIO_MMIO_DEVICE_DESC_LOW</name>
        <initializer>0x0a0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="37" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="37" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ae865b787c9c9b374a2da8e0810a08f44" prot="public" static="no">
        <name>VIRTIO_MMIO_DEVICE_DESC_HIGH</name>
        <initializer>0x0a4</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="38" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="38" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a9a057904115e16c67c5adc2c97d69746" prot="public" static="no">
        <name>VIRTIO_CONFIG_S_ACKNOWLEDGE</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="41" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a02ec5c45d255a19824d61050d9925b39" prot="public" static="no">
        <name>VIRTIO_CONFIG_S_DRIVER</name>
        <initializer>2</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="42" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="42" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1afc68bf23eb9cda196e0fab18f89aa3e1" prot="public" static="no">
        <name>VIRTIO_CONFIG_S_DRIVER_OK</name>
        <initializer>4</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="43" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="43" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a5c8cf2858a304245299ce50835b47291" prot="public" static="no">
        <name>VIRTIO_CONFIG_S_FEATURES_OK</name>
        <initializer>8</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="44" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="44" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1aa24486e8dd96dd86c415ad6e04221424" prot="public" static="no">
        <name>VIRTIO_BLK_F_RO</name>
        <initializer>5          /* Disk is read-only */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="47" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1aad7c44284dc8173499943e3402de5b1b" prot="public" static="no">
        <name>VIRTIO_BLK_F_SCSI</name>
        <initializer>7        /* Supports scsi command passthru */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="48" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="48" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a6064eb12c03012a30c0a5082b4fba3e4" prot="public" static="no">
        <name>VIRTIO_BLK_F_CONFIG_WCE</name>
        <initializer>11 /* Writeback mode available in config */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="49" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="49" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a825eaa1d195818dc1c2cc9796363d148" prot="public" static="no">
        <name>VIRTIO_BLK_F_MQ</name>
        <initializer>12         /* support more than one vq */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="50" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="50" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a736c5cf3b8352bcec7c79ef42536a445" prot="public" static="no">
        <name>VIRTIO_BLK_T_IN</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="52" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="52" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a47e0526d29f30098a2f665fb9f4b6d1f" prot="public" static="no">
        <name>VIRTIO_BLK_T_OUT</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="53" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="53" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1aa32be3266e0b2ded01f1609380cff620" prot="public" static="no">
        <name>VIRTIO_F_ANY_LAYOUT</name>
        <initializer>27</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="55" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="55" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ab01a363ce20422c5d9065269fbf3eccf" prot="public" static="no">
        <name>VIRTIO_RING_F_INDIRECT_DESC</name>
        <initializer>28</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="56" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="56" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1abaad7d994ac1bb57a3bd2d058cff5c7a" prot="public" static="no">
        <name>VIRTIO_RING_F_EVENT_IDX</name>
        <initializer>29</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="57" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="57" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ac98030127cfdd5b7e53a4756a38d3e28" prot="public" static="no">
        <name>VRING_DESC_F_NEXT</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="59" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="59" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a74fe2dbfe07fd3d386e87e7e7a921691" prot="public" static="no">
        <name>VRING_DESC_F_WRITE</name>
        <initializer>2</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="60" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="60" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a426aa6e3c35dfb88e15948652c6ebfc6" prot="public" static="no">
        <name>DESC_NUM</name>
        <initializer>8</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="64" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="64" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a403cf3149c084cea115b85c90721039a" prot="public" static="no">
        <name>BSIZE</name>
        <initializer>512</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="65" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="65" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a54ea311b7f4ea60d46210a46ffd9d970" prot="public" static="no">
        <name>BNUM</name>
        <initializer>1600</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="66" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="66" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a31cde324007b4e52bbba7079ec5e5f45" prot="public" static="no">
        <name>MAXOPBLOCKS</name>
        <initializer>10</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="68" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="68" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1acc7694167c7840a913939a1b90808b4c" prot="public" static="no">
        <name>LOGSIZE</name>
        <initializer>(<ref refid="virtio_8h_1a31cde324007b4e52bbba7079ec5e5f45" kindref="member">MAXOPBLOCKS</ref> * 3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="69" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="69" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ad51e2f8dffd163c263ec676a268d0f0a" prot="public" static="no">
        <name>NBUF</name>
        <initializer>(<ref refid="virtio_8h_1a31cde324007b4e52bbba7079ec5e5f45" kindref="member">MAXOPBLOCKS</ref> * 3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="70" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="70" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1ae8b92eb9de2dd7366dc77a6470fe9924" prot="public" static="no">
        <name>DEV_VDA2</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="72" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="72" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="virtio_8h_1a80e6faf1cf09d43dab325b4fd98cddfd" prot="public" static="no">
        <name>R</name>
        <param><defname>r</defname></param>
        <initializer>((volatile <ref refid="types_8h_1a1134b580f8da4de94ca6b1de4d37975e" kindref="member">uint32</ref> *)(<ref refid="virtio_8h_1a149d1d589a8c46a58ed3709179dacd09" kindref="member">virtio_base</ref> + (r)))</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="76" column="9" bodyfile="src/drivers/virtio/virtio.h" bodystart="76" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="virtio_8h_1abeec8e43c27af535cdc9eecf74feec14" prot="public" static="no">
        <type>struct <ref refid="structbuf" kindref="compound">buf</ref></type>
        <definition>typedef struct buf buf_t</definition>
        <argsstring></argsstring>
        <name>buf_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="88" column="7"/>
      </memberdef>
      <memberdef kind="typedef" id="virtio_8h_1a6cf8c39ebd728b928a97e94adec87acb" prot="public" static="no">
        <type>struct <ref refid="structvring__desc__t" kindref="compound">vring_desc_t</ref></type>
        <definition>typedef struct vring_desc_t vring_desc_t</definition>
        <argsstring></argsstring>
        <name>vring_desc_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="95" column="14"/>
      </memberdef>
      <memberdef kind="typedef" id="virtio_8h_1a4cbe66e400feda7b94e088a221b12970" prot="public" static="no">
        <type>struct <ref refid="structvring__used__elem" kindref="compound">vring_used_elem</ref></type>
        <definition>typedef struct vring_used_elem vring_used_elem_t</definition>
        <argsstring></argsstring>
        <name>vring_used_elem_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="100" column="19"/>
      </memberdef>
      <memberdef kind="typedef" id="virtio_8h_1a502c4f9ca7f81bc9bb9955d5576c6302" prot="public" static="no">
        <type>struct <ref refid="structvring__used__area" kindref="compound">vring_used_area</ref></type>
        <definition>typedef struct vring_used_area vring_used_area_t</definition>
        <argsstring></argsstring>
        <name>vring_used_area_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="106" column="19"/>
      </memberdef>
      <memberdef kind="typedef" id="virtio_8h_1a8d653a4500a141fdb698c92dab13cab6" prot="public" static="no">
        <type>struct <ref refid="structdisk" kindref="compound">disk</ref></type>
        <definition>typedef struct disk disk_t</definition>
        <argsstring></argsstring>
        <name>disk_t</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="132" column="8"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="virtio_8h_1a149d1d589a8c46a58ed3709179dacd09" prot="public" static="no" mutable="no">
        <type><ref refid="types_8h_1ad6cb5da84246290b3d730166b020f2a8" kindref="member">uintptr_t</ref></type>
        <definition>uintptr_t virtio_base</definition>
        <argsstring></argsstring>
        <name>virtio_base</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="74" column="18" declfile="src/drivers/virtio/virtio.h" declline="74" declcolumn="18"/>
      </memberdef>
      <memberdef kind="variable" id="virtio_8h_1affcceda12b139f26819f4929be705eb1" prot="public" static="no" mutable="no">
        <type><ref refid="virtio_8h_1a8d653a4500a141fdb698c92dab13cab6" kindref="member">disk_t</ref></type>
        <definition>disk_t disk</definition>
        <argsstring></argsstring>
        <name>disk</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="134" column="15" declfile="src/drivers/virtio/virtio.h" declline="134" declcolumn="15"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="virtio_8h_1af424e92b7261894dfbedb1a74cd058b2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_virtio_disk_init</definition>
        <argsstring>(void)</argsstring>
        <name>d_virtio_disk_init</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="136" column="6" declfile="src/drivers/virtio/virtio.h" declline="136" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1a5885c51c8df017d9229a04c82a7ad824" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_virtio_disk_rw</definition>
        <argsstring>(struct buf *b, int write)</argsstring>
        <name>d_virtio_disk_rw</name>
        <param>
          <type>struct <ref refid="structbuf" kindref="compound">buf</ref> *</type>
          <declname>b</declname>
        </param>
        <param>
          <type>int</type>
          <declname>write</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="137" column="6" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="118" bodyend="206" declfile="src/drivers/virtio/virtio.h" declline="137" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1ab1f5fdc4a4bfec78afe1eb9f1945283c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_virtio_disk_intr</definition>
        <argsstring>(void)</argsstring>
        <name>d_virtio_disk_intr</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="138" column="6" declfile="src/drivers/virtio/virtio.h" declline="138" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1a8ddc08c99fd7de9077364679f3e88a1b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_binit</definition>
        <argsstring>(void)</argsstring>
        <name>d_binit</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="140" column="6" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="218" bodyend="236" declfile="src/drivers/virtio/virtio.h" declline="140" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1a12f1c0d23fca4f04e96e7e691226b223" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>struct <ref refid="structbuf" kindref="compound">buf</ref> *</type>
        <definition>struct buf* d_bread</definition>
        <argsstring>(uint, uint)</argsstring>
        <name>d_bread</name>
        <param>
          <type><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref></type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref></type>
          <declname>sectorno</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="141" column="10" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="274" bodyend="284" declfile="src/drivers/virtio/virtio.h" declline="141" declcolumn="10"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1aff4eaa6436245fe6212f6749931f9e9c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_brelse</definition>
        <argsstring>(struct buf *)</argsstring>
        <name>d_brelse</name>
        <param>
          <type>struct <ref refid="structbuf" kindref="compound">buf</ref> *</type>
          <declname>b</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="142" column="6" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="296" bodyend="316" declfile="src/drivers/virtio/virtio.h" declline="142" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1a34e5a0a8ac3d51f31b008408e04ca19e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_bwrite</definition>
        <argsstring>(struct buf *)</argsstring>
        <name>d_bwrite</name>
        <param>
          <type>struct <ref refid="structbuf" kindref="compound">buf</ref> *</type>
          <declname>b</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="143" column="6" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="287" bodyend="292" declfile="src/drivers/virtio/virtio.h" declline="143" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1a33511cb0c7b8c8a3a4c9e9a337dc567a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_sd_read</definition>
        <argsstring>(char *buffers, uint *start_block_id, uint block_num)</argsstring>
        <name>d_sd_read</name>
        <param>
          <type>char *</type>
          <declname>buffers</declname>
        </param>
        <param>
          <type><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref> *</type>
          <declname>start_block_id</declname>
        </param>
        <param>
          <type><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref></type>
          <declname>block_num</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="145" column="6" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="330" bodyend="337" declfile="src/drivers/virtio/virtio.h" declline="145" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="virtio_8h_1a3ba8dbd5d9de7f8bb698576b733f17c2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void d_sd_write</definition>
        <argsstring>(char *buffers, uint *start_block_ids, uint block_num)</argsstring>
        <name>d_sd_write</name>
        <param>
          <type>char *</type>
          <declname>buffers</declname>
        </param>
        <param>
          <type><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref> *</type>
          <declname>start_block_ids</declname>
        </param>
        <param>
          <type><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref></type>
          <declname>block_num</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/drivers/virtio/virtio.h" line="146" column="6" bodyfile="src/drivers/virtio/virtio_blk.c" bodystart="339" bodyend="347" declfile="src/drivers/virtio/virtio.h" declline="146" declcolumn="6"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#pragma<sp/>once</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="pgtable_8h" kindref="compound">asm/pgtable.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="types_8h" kindref="compound">common/types.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="lock_8h" kindref="compound">os/lock.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7" refid="virtio_8h_1aac8de2a0393367154119c25e2b279953" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO0<sp/>0x10001000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8" refid="virtio_8h_1a25f490f8544627e94679dd4eee307c8a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO0_IRQ<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10" refid="virtio_8h_1a1ff87be27fd6ca3d1bd9190864fdf3a5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MAGIC<sp/>0x74726976</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11" refid="virtio_8h_1a854926a03de057048cd2bb6711b3cac0" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_VERSION<sp/>0x1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12" refid="virtio_8h_1a64ec44b55710ce97891b959bc30dc263" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_DEVICE_ID_INV<sp/>0x0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13" refid="virtio_8h_1a42e74c95bee426e6ac63b472b3c4d615" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_DEVICE_ID_NET<sp/>0x1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="virtio_8h_1a522b8a7ec068da7590967e4bb211cba6" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_DEVICE_ID_BLK<sp/>0x2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="virtio_8h_1a4ec945bee3dc37c6fd22962eaed5ef68" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_VENDOR_ID_QEMU<sp/>0x554d4551</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="virtio_8h_1adbc4f6c0d30c76a45fdc2dabe4cd2cbb" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_MAGIC_VALUE<sp/>0x000<sp/></highlight><highlight class="comment">//<sp/>0x74726976</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18" refid="virtio_8h_1ab3b8d6bd5655e57baf01447384883076" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_VERSION<sp/>0x004<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>version;<sp/>should<sp/>be<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19" refid="virtio_8h_1a843ffa98e22c96b9f33a0f4eb37a00cb" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DEVICE_ID<sp/>0x008<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>device<sp/>type;<sp/>1<sp/>is<sp/>net,<sp/>2<sp/>is<sp/>disk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="virtio_8h_1ae24a27c9de546c99f70992f060e4ce99" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_VENDOR_ID<sp/>0x00c<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0x554d4551</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21" refid="virtio_8h_1a5dd01aeb9c7de8d00b86814e1df075c1" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DEVICE_FEATURES<sp/>0x010</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="virtio_8h_1a9cf63c483bba3f905802d27bdef1c405" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DRIVER_FEATURES<sp/>0x020</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="virtio_8h_1ac38064f45b6ee9dde59197cd6aeaf5ef" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_GUEST_PAGE_SIZE<sp/>0x028<sp/><sp/></highlight><highlight class="comment">//<sp/>page<sp/>size<sp/>for<sp/>PFN,<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24" refid="virtio_8h_1af06acc888e4338d9d286199d9f005380" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_SEL<sp/>0x030<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>select<sp/>queue,<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25" refid="virtio_8h_1a017f59f133403156d7443bf5a28a3ceb" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_NUM_MAX<sp/>0x034<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>max<sp/>size<sp/>of<sp/>current<sp/>queue,<sp/>read-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="virtio_8h_1ac04653c6ac4c886e5f08f0b292f66d1c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_NUM<sp/>0x038<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>size<sp/>of<sp/>current<sp/>queue,<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27" refid="virtio_8h_1ad4da01927cf7b7e634817688bd6863a5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_PFN<sp/>0x040<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>physical<sp/>page<sp/>number<sp/>for<sp/>queue,<sp/>read/write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28" refid="virtio_8h_1a465c47ba6a9f60ba8ab41eeae4499463" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_READY<sp/>0x044<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ready<sp/>bit</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29" refid="virtio_8h_1af33b9135a8725e32c95e412b97ecdce5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_NOTIFY<sp/>0x050<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="virtio_8h_1ae8d1f2f787d1164fe9cc24b28bbc5c3c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_INTERRUPT_STATUS<sp/>0x060<sp/></highlight><highlight class="comment">//<sp/>read-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="virtio_8h_1a2bec6b89c384b4860985d98340a540d5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_INTERRUPT_ACK<sp/>0x064<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="virtio_8h_1a93ae0e8556428cc98d2f964eb82d3aec" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_STATUS<sp/>0x070<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>read/write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33" refid="virtio_8h_1a47a92b06df621b14b67c3c45a7d3f97a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_DESC_LOW<sp/>0x080<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>physical<sp/>address<sp/>for<sp/>descriptor<sp/>table,<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="virtio_8h_1aa4404e6255943932d3460111008ae11d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_QUEUE_DESC_HIGH<sp/>0x084</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35" refid="virtio_8h_1a9e2cbfbe798bc5d5f83a5d18bf3e79dc" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DRIVER_DESC_LOW<sp/>0x090<sp/></highlight><highlight class="comment">//<sp/>physical<sp/>address<sp/>for<sp/>available<sp/>ring,<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="virtio_8h_1aed499579cb6aa8847ef46495bac65a87" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DRIVER_DESC_HIGH<sp/>0x094</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="virtio_8h_1a78d0ab0e08fb760a532cc01e08753665" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DEVICE_DESC_LOW<sp/>0x0a0<sp/></highlight><highlight class="comment">//<sp/>physical<sp/>address<sp/>for<sp/>used<sp/>ring,<sp/>write-only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38" refid="virtio_8h_1ae865b787c9c9b374a2da8e0810a08f44" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_MMIO_DEVICE_DESC_HIGH<sp/>0x0a4</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">//<sp/>status<sp/>register<sp/>bits,<sp/>from<sp/>qemu<sp/>virtio_config.h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="virtio_8h_1a9a057904115e16c67c5adc2c97d69746" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_CONFIG_S_ACKNOWLEDGE<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42" refid="virtio_8h_1a02ec5c45d255a19824d61050d9925b39" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_CONFIG_S_DRIVER<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="virtio_8h_1afc68bf23eb9cda196e0fab18f89aa3e1" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_CONFIG_S_DRIVER_OK<sp/>4</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="virtio_8h_1a5c8cf2858a304245299ce50835b47291" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_CONFIG_S_FEATURES_OK<sp/>8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">//<sp/>device<sp/>feature<sp/>bits</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47" refid="virtio_8h_1aa24486e8dd96dd86c415ad6e04221424" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_BLK_F_RO<sp/>5<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disk<sp/>is<sp/>read-only<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="virtio_8h_1aad7c44284dc8173499943e3402de5b1b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_BLK_F_SCSI<sp/>7<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Supports<sp/>scsi<sp/>command<sp/>passthru<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="virtio_8h_1a6064eb12c03012a30c0a5082b4fba3e4" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_BLK_F_CONFIG_WCE<sp/>11<sp/></highlight><highlight class="comment">/*<sp/>Writeback<sp/>mode<sp/>available<sp/>in<sp/>config<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50" refid="virtio_8h_1a825eaa1d195818dc1c2cc9796363d148" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_BLK_F_MQ<sp/>12<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>support<sp/>more<sp/>than<sp/>one<sp/>vq<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="virtio_8h_1a736c5cf3b8352bcec7c79ef42536a445" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_BLK_T_IN<sp/>0<sp/><sp/></highlight><highlight class="comment">//<sp/>read<sp/>the<sp/>disk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53" refid="virtio_8h_1a47e0526d29f30098a2f665fb9f4b6d1f" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_BLK_T_OUT<sp/>1<sp/></highlight><highlight class="comment">//<sp/>write<sp/>the<sp/>disk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55" refid="virtio_8h_1aa32be3266e0b2ded01f1609380cff620" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_F_ANY_LAYOUT<sp/>27</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="virtio_8h_1ab01a363ce20422c5d9065269fbf3eccf" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_RING_F_INDIRECT_DESC<sp/>28</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57" refid="virtio_8h_1abaad7d994ac1bb57a3bd2d058cff5c7a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VIRTIO_RING_F_EVENT_IDX<sp/>29</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59" refid="virtio_8h_1ac98030127cfdd5b7e53a4756a38d3e28" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VRING_DESC_F_NEXT<sp/>1<sp/><sp/></highlight><highlight class="comment">//<sp/>chained<sp/>with<sp/>another<sp/>descriptor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="virtio_8h_1a74fe2dbfe07fd3d386e87e7e7a921691" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VRING_DESC_F_WRITE<sp/>2<sp/></highlight><highlight class="comment">//<sp/>device<sp/>writes<sp/>(vs<sp/>read</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="comment">//<sp/>this<sp/>many<sp/>virtio<sp/>descriptors.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="comment">//<sp/>must<sp/>be<sp/>a<sp/>power<sp/>of<sp/>two.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="virtio_8h_1a426aa6e3c35dfb88e15948652c6ebfc6" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DESC_NUM<sp/>8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="virtio_8h_1a403cf3149c084cea115b85c90721039a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BSIZE<sp/>512</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="virtio_8h_1a54ea311b7f4ea60d46210a46ffd9d970" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BNUM<sp/>1600</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68" refid="virtio_8h_1a31cde324007b4e52bbba7079ec5e5f45" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MAXOPBLOCKS<sp/>10<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>max<sp/>#<sp/>of<sp/>blocks<sp/>any<sp/>FS<sp/>op<sp/>writes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69" refid="virtio_8h_1acc7694167c7840a913939a1b90808b4c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LOGSIZE<sp/>(MAXOPBLOCKS<sp/>*<sp/>3)<sp/></highlight><highlight class="comment">//<sp/>max<sp/>data<sp/>blocks<sp/>in<sp/>on-disk<sp/>log</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70" refid="virtio_8h_1ad51e2f8dffd163c263ec676a268d0f0a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NBUF<sp/>(MAXOPBLOCKS<sp/>*<sp/>3)<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>size<sp/>of<sp/>disk<sp/>block<sp/>cache</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72" refid="virtio_8h_1ae8b92eb9de2dd7366dc77a6470fe9924" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEV_VDA2<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/><ref refid="types_8h_1ad6cb5da84246290b3d730166b020f2a8" kindref="member">uintptr_t</ref><sp/><ref refid="virtio_8h_1a149d1d589a8c46a58ed3709179dacd09" kindref="member">virtio_base</ref>;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76" refid="virtio_8h_1a80e6faf1cf09d43dab325b4fd98cddfd" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>R(r)<sp/>((volatile<sp/>uint32<sp/>*)(virtio_base<sp/>+<sp/>(r)))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78" refid="structbuf" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structbuf" kindref="compound">buf</ref><sp/>{</highlight></codeline>
<codeline lineno="79" refid="structbuf_1a8983733a2501c7d03a45c7de7057116a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structbuf_1a8983733a2501c7d03a45c7de7057116a" kindref="member">valid</ref>;</highlight></codeline>
<codeline lineno="80" refid="structbuf_1a598c840a233e368937d47cd1b7a5f3a2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structbuf_1a598c840a233e368937d47cd1b7a5f3a2" kindref="member">disk</ref>;<sp/></highlight><highlight class="comment">//<sp/>does<sp/>disk<sp/>&quot;own&quot;<sp/>buf?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="structbuf_1ac96082c2b5f22133ac7092ef81487227" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/><ref refid="structbuf_1ac96082c2b5f22133ac7092ef81487227" kindref="member">dev</ref>;</highlight></codeline>
<codeline lineno="82" refid="structbuf_1a6e69224f6242650993c1e3f12d39b85d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/><ref refid="structbuf_1a6e69224f6242650993c1e3f12d39b85d" kindref="member">sectorno</ref>;<sp/></highlight><highlight class="comment">//<sp/>sector<sp/>number</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="structbuf_1a755114a8c3b1d1a7b68458e22a1175ef" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsleep__lock" kindref="compound">sleep_lock_t</ref><sp/><ref refid="structbuf_1a755114a8c3b1d1a7b68458e22a1175ef" kindref="member">lock</ref>;</highlight></codeline>
<codeline lineno="84" refid="structbuf_1aaf5efe777371aaeb9944508fd52adda5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/><ref refid="structbuf_1aaf5efe777371aaeb9944508fd52adda5" kindref="member">refcnt</ref>;</highlight></codeline>
<codeline lineno="85" refid="structbuf_1a930cab1e1b3751795d31bfd0291dff4a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structbuf" kindref="compound">buf</ref><sp/>*<ref refid="structbuf_1a930cab1e1b3751795d31bfd0291dff4a" kindref="member">prev</ref>;</highlight></codeline>
<codeline lineno="86" refid="structbuf_1ab18c18abb22f07617619e9a74c71f51a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structbuf" kindref="compound">buf</ref><sp/>*<ref refid="structbuf_1ab18c18abb22f07617619e9a74c71f51a" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="87" refid="structbuf_1a6f4829eccb5ca803fb56d9998aa2b7e4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structbuf_1a6f4829eccb5ca803fb56d9998aa2b7e4" kindref="member">data</ref>[<ref refid="virtio_8h_1a403cf3149c084cea115b85c90721039a" kindref="member">BSIZE</ref>];</highlight></codeline>
<codeline lineno="88" refid="virtio_8h_1abeec8e43c27af535cdc9eecf74feec14" refkind="member"><highlight class="normal">}<sp/><ref refid="virtio_8h_1abeec8e43c27af535cdc9eecf74feec14" kindref="member">buf_t</ref>;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90" refid="structvring__desc__t" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structvring__desc__t" kindref="compound">vring_desc_t</ref><sp/>{</highlight></codeline>
<codeline lineno="91" refid="structvring__desc__t_1af3b580bebd608778555c5c8ba43f1223" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a29940ae63ec06c9998bba873e25407ad" kindref="member">uint64</ref><sp/><ref refid="structvring__desc__t_1af3b580bebd608778555c5c8ba43f1223" kindref="member">addr</ref>;</highlight></codeline>
<codeline lineno="92" refid="structvring__desc__t_1a207df2c4115f2de24b151f792c922fd6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a1134b580f8da4de94ca6b1de4d37975e" kindref="member">uint32</ref><sp/><ref refid="structvring__desc__t_1a207df2c4115f2de24b151f792c922fd6" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="93" refid="structvring__desc__t_1a0c1d8fa3e009abfbd010f4dde9470e07" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a05f6b0ae8f6a6e135b0e290c25fe0e4e" kindref="member">uint16</ref><sp/><ref refid="structvring__desc__t_1a0c1d8fa3e009abfbd010f4dde9470e07" kindref="member">flags</ref>;</highlight></codeline>
<codeline lineno="94" refid="structvring__desc__t_1acc506d763dd0c278697133eb6c81cf8c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a05f6b0ae8f6a6e135b0e290c25fe0e4e" kindref="member">uint16</ref><sp/><ref refid="structvring__desc__t_1acc506d763dd0c278697133eb6c81cf8c" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="95" refid="virtio_8h_1a6cf8c39ebd728b928a97e94adec87acb" refkind="member"><highlight class="normal">}<sp/><ref refid="virtio_8h_1a6cf8c39ebd728b928a97e94adec87acb" kindref="member">vring_desc_t</ref>;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97" refid="structvring__used__elem" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structvring__used__elem" kindref="compound">vring_used_elem</ref><sp/>{</highlight></codeline>
<codeline lineno="98" refid="structvring__used__elem_1a6c72e1ef35061bac3540fc0c53377b57" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a1134b580f8da4de94ca6b1de4d37975e" kindref="member">uint32</ref><sp/><ref refid="structvring__used__elem_1a6c72e1ef35061bac3540fc0c53377b57" kindref="member">id</ref>;<sp/></highlight><highlight class="comment">//<sp/>index<sp/>of<sp/>start<sp/>of<sp/>completed<sp/>descriptor<sp/>chain</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99" refid="structvring__used__elem_1a84d88b0fd1a6147344ac24fe5e5e939b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a1134b580f8da4de94ca6b1de4d37975e" kindref="member">uint32</ref><sp/><ref refid="structvring__used__elem_1a84d88b0fd1a6147344ac24fe5e5e939b" kindref="member">len</ref>;</highlight></codeline>
<codeline lineno="100" refid="virtio_8h_1a4cbe66e400feda7b94e088a221b12970" refkind="member"><highlight class="normal">}<sp/><ref refid="virtio_8h_1a4cbe66e400feda7b94e088a221b12970" kindref="member">vring_used_elem_t</ref>;</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="structvring__used__area" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structvring__used__area" kindref="compound">vring_used_area</ref><sp/>{</highlight></codeline>
<codeline lineno="103" refid="structvring__used__area_1afd8950c1ecf3bd4479da3d18bdab152f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a05f6b0ae8f6a6e135b0e290c25fe0e4e" kindref="member">uint16</ref><sp/><ref refid="structvring__used__area_1afd8950c1ecf3bd4479da3d18bdab152f" kindref="member">flags</ref>;</highlight></codeline>
<codeline lineno="104" refid="structvring__used__area_1a934dbd2e49f0e5e93e0fbacadfbc37c3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a05f6b0ae8f6a6e135b0e290c25fe0e4e" kindref="member">uint16</ref><sp/><ref refid="structvring__used__area_1a934dbd2e49f0e5e93e0fbacadfbc37c3" kindref="member">id</ref>;</highlight></codeline>
<codeline lineno="105" refid="structvring__used__area_1abc6101a7814451dae9c70cf376e58544" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structvring__used__elem" kindref="compound">vring_used_elem_t</ref><sp/><ref refid="structvring__used__area_1abc6101a7814451dae9c70cf376e58544" kindref="member">elems</ref>[<ref refid="virtio_8h_1a426aa6e3c35dfb88e15948652c6ebfc6" kindref="member">DESC_NUM</ref>];</highlight></codeline>
<codeline lineno="106" refid="virtio_8h_1a502c4f9ca7f81bc9bb9955d5576c6302" refkind="member"><highlight class="normal">}<sp/><ref refid="virtio_8h_1a502c4f9ca7f81bc9bb9955d5576c6302" kindref="member">vring_used_area_t</ref>;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108" refid="structdisk" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdisk" kindref="compound">disk</ref><sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>memory<sp/>for<sp/>virtio<sp/>descriptors<sp/>&amp;c<sp/>for<sp/>queue<sp/>0.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>this<sp/>is<sp/>a<sp/>global<sp/>instead<sp/>of<sp/>allocated<sp/>because<sp/>it<sp/>must</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>be<sp/>multiple<sp/>contiguous<sp/>pages,<sp/>which<sp/>kalloc()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>doesn&apos;t<sp/>support,<sp/>and<sp/>page<sp/>aligned.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113" refid="structdisk_1a6d4c7ff9bc8353d450030cd8e48f9cec" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structdisk_1a6d4c7ff9bc8353d450030cd8e48f9cec" kindref="member">pages</ref>[2<sp/>*<sp/><ref refid="pgtable_8h_1a4d79b19c57b121d211b145092347ae82" kindref="member">NORMAL_PAGE_SIZE</ref>];</highlight></codeline>
<codeline lineno="114" refid="structdisk_1a7b2400d9c769854a3efed9b5b65839db" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structvring__desc__t" kindref="compound">vring_desc_t</ref><sp/>*<ref refid="structdisk_1a7b2400d9c769854a3efed9b5b65839db" kindref="member">desc</ref>;</highlight></codeline>
<codeline lineno="115" refid="structdisk_1a2fed856c690d0ea756d79f944d49298b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a05f6b0ae8f6a6e135b0e290c25fe0e4e" kindref="member">uint16</ref><sp/>*<ref refid="structdisk_1a2fed856c690d0ea756d79f944d49298b" kindref="member">avail</ref>;</highlight></codeline>
<codeline lineno="116" refid="structdisk_1a058b2305d48e765acfa6119ae33b9744" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structvring__used__area" kindref="compound">vring_used_area_t</ref><sp/>*<ref refid="structdisk_1a058b2305d48e765acfa6119ae33b9744" kindref="member">used</ref>;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>our<sp/>own<sp/>book-keeping.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119" refid="structdisk_1a3f5e4b09fa2f087160e09c1172ca0469" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structdisk_1a3f5e4b09fa2f087160e09c1172ca0469" kindref="member">free</ref>[<ref refid="virtio_8h_1a426aa6e3c35dfb88e15948652c6ebfc6" kindref="member">DESC_NUM</ref>];<sp/></highlight><highlight class="comment">//<sp/>is<sp/>a<sp/>descriptor<sp/>free?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120" refid="structdisk_1a5c4dc4614e9f8297f9daf23febdb5050" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="types_8h_1a05f6b0ae8f6a6e135b0e290c25fe0e4e" kindref="member">uint16</ref><sp/><ref refid="structdisk_1a5c4dc4614e9f8297f9daf23febdb5050" kindref="member">used_idx</ref>;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we&apos;ve<sp/>looked<sp/>this<sp/>far<sp/>in<sp/>used[2..NUM].</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>track<sp/>info<sp/>about<sp/>in-flight<sp/>operations,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>use<sp/>when<sp/>completion<sp/>interrupt<sp/>arrives.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>indexed<sp/>by<sp/>first<sp/>descriptor<sp/>index<sp/>of<sp/>chain.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="126" refid="structdisk_1a0f33659319699168b62924bbb8557927" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structbuf" kindref="compound">buf</ref><sp/>*<ref refid="structdisk_1a0f33659319699168b62924bbb8557927" kindref="member">b</ref>;</highlight></codeline>
<codeline lineno="127" refid="structdisk_1a9af27b68ec4562decb4e7d22a8685681" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structdisk_1a9af27b68ec4562decb4e7d22a8685681" kindref="member">status</ref>;</highlight></codeline>
<codeline lineno="128" refid="structdisk_1a928468fbe367e8e7c62511a56d010f6f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><ref refid="structdisk_1a928468fbe367e8e7c62511a56d010f6f" kindref="member">info</ref>[<ref refid="virtio_8h_1a426aa6e3c35dfb88e15948652c6ebfc6" kindref="member">DESC_NUM</ref>];</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130" refid="structdisk_1a68fda05cc6273072a123fddf6a69ae7a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structspin__lock" kindref="compound">spin_lock_t</ref><sp/><ref refid="structdisk_1a68fda05cc6273072a123fddf6a69ae7a" kindref="member">vdisk_lock</ref>;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132" refid="virtio_8h_1a8d653a4500a141fdb698c92dab13cab6" refkind="member"><highlight class="normal">}<sp/><ref refid="virtio_8h_1a8d653a4500a141fdb698c92dab13cab6" kindref="member">disk_t</ref>;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/><ref refid="structdisk" kindref="compound">disk_t</ref><sp/><ref refid="virtio_8h_1affcceda12b139f26819f4929be705eb1" kindref="member">disk</ref>;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136" refid="virtio_8h_1af424e92b7261894dfbedb1a74cd058b2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1af424e92b7261894dfbedb1a74cd058b2" kindref="member">d_virtio_disk_init</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1a5885c51c8df017d9229a04c82a7ad824" kindref="member">d_virtio_disk_rw</ref>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structbuf" kindref="compound">buf</ref><sp/>*b,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>write);</highlight></codeline>
<codeline lineno="138" refid="virtio_8h_1ab1f5fdc4a4bfec78afe1eb9f1945283c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1ab1f5fdc4a4bfec78afe1eb9f1945283c" kindref="member">d_virtio_disk_intr</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1a8ddc08c99fd7de9077364679f3e88a1b" kindref="member">d_binit</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structbuf" kindref="compound">buf</ref><sp/>*<ref refid="virtio_8h_1a12f1c0d23fca4f04e96e7e691226b223" kindref="member">d_bread</ref>(<ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref>,<sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref>);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1aff4eaa6436245fe6212f6749931f9e9c" kindref="member">d_brelse</ref>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structbuf" kindref="compound">buf</ref><sp/>*);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1a34e5a0a8ac3d51f31b008408e04ca19e" kindref="member">d_bwrite</ref>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structbuf" kindref="compound">buf</ref><sp/>*);</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1a33511cb0c7b8c8a3a4c9e9a337dc567a" kindref="member">d_sd_read</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buffers,<sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/>*start_block_id,<sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/>block_num);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="virtio_8h_1a3ba8dbd5d9de7f8bb698576b733f17c2" kindref="member">d_sd_write</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buffers,<sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/>*start_block_ids,<sp/><ref refid="types_8h_1a91ad9478d81a7aaf2593e8d9c3d06a14" kindref="member">uint</ref><sp/>block_num);</highlight></codeline>
    </programlisting>
    <location file="src/drivers/virtio/virtio.h"/>
  </compounddef>
</doxygen>
